<!DOCTYPE html><html lang="zh-cmn-Hans" prefix="og: http://ogp.me/ns#" class="han-init"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /><title>Solidity foundation - Part 2 &mdash; Tuhalang</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/vendor/primer-css/css/primer.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/css/components/collection.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/css/components/repo-card.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/css/sections/repo-list.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/css/components/boxed-group.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/css/globals/common.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/css/globals/responsive.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/css/posts/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/vendor/octicons/octicons/octicons.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mzlogin/rouge-themes@master/dist/github.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/vendor/share.js/dist/css/share.min.css"><link rel="canonical" href="https://tuhalang.github.io/2022/03/27/Solidity-Foundation-Part-2/"><link rel="alternate" type="application/atom+xml" title="Tuhalang" href="https://tuhalang.github.io/feed.xml"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/favicon.ico"><meta property="og:title" content="Solidity foundation - Part 2"><meta name="keywords" content="Smartcontract, Blockchain, Solidity"><meta name="og:keywords" content="Smartcontract, Blockchain, Solidity"><meta name="description" content="In this post, we will continue discussing the basics of Solidity language. You can read the previous post here."><meta name="og:description" content="In this post, we will continue discussing the basics of Solidity language. You can read the previous post here."><meta property="og:url" content="https://tuhalang.github.io/2022/03/27/Solidity-Foundation-Part-2/"><meta property="og:site_name" content="Tuhalang"><meta property="og:type" content="article"><meta property="og:locale" content="zh_CN" /><meta property="article:published_time" content="2022-03-27"> <script src="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/vendor/jquery/dist/jquery.min.js"></script> <script src="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/js/jquery-ui.js"></script> <script src="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/js/main.js"></script> <script data-ad-client="ca-pub-7093222719567591" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-161740789-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-161740789-1'); </script></head><body class="" data-mz=""><header class="site-header"><div class="container"><h1><a href="https://tuhalang.github.io/" title="Tuhalang"><span class="octicon octicon-mark-github"></span> Tuhalang</a></h1><button class="collapsed mobile-visible" type="button" onclick="toggleMenu();"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button><nav class="site-header-nav" role="navigation"> <a href="https://tuhalang.github.io/" class=" site-header-nav-item" target="" title="Home">Home</a> <a href="https://tuhalang.github.io/categories/" class=" site-header-nav-item" target="" title="Categories">Categories</a> <a href="https://tuhalang.github.io/archives/" class=" site-header-nav-item" target="" title="Archives">Archives</a> <a href="https://tuhalang.github.io/wiki/" class=" site-header-nav-item" target="" title="Wiki">Wiki</a> <a href="https://tuhalang.github.io/about/" class=" site-header-nav-item" target="" title="About">About</a></nav></div></header><section class="collection-head small geopattern" data-pattern-id="Solidity founda"><div class="container"><div class="columns"><div class="column three-fourths"><div class="collection-title"><h1 class="collection-header">Solidity foundation - Part 2</h1><div class="collection-info"> <span class="meta-info"> <span class="octicon octicon-calendar"></span> 2022/03/27 </span> <span class="meta-info"> <span class="octicon octicon-file-directory"></span> <a href="https://tuhalang.github.io/categories/#Smartcontract" title="Smartcontract">Smartcontract</a> </span> <span class="meta-info"> <span class="octicon octicon-file-directory"></span> <a href="https://tuhalang.github.io/categories/#Blockchain" title="Blockchain">Blockchain</a> </span> <span class="meta-info"> <span class="octicon octicon-file-directory"></span> <a href="https://tuhalang.github.io/categories/#Solidity" title="Solidity">Solidity</a> </span> <span class="meta-info"> <span class="octicon octicon-clock"></span> Common 8489 words，about 25 minutes </span></div></div></div><div class="column one-fourth mobile-hidden"><div class="collection-title"></div></div></div></div></section><section class="container content"><div class="columns"><div class="column three-fourths" ><article class="article-content markdown-body"><p>In this post, we will continue discussing the basics of Solidity language. You can read the previous post <a href="https://tuhalang.github.io/2022/03/27/Solidity-Foundation-Part-1/">here</a>.</p><h3 id="1-mapping">1. Mapping</h3><ul><li><strong>Mapping</strong> is same as Map in Java.</li><li>Declaration syntax:<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">mapping</span><span class="p">(</span><span class="n">keyType</span> <span class="o">=&gt;</span> <span class="n">valueType</span><span class="p">)</span> <span class="k">public</span> <span class="n">myMapping</span><span class="p">;</span>
</code></pre></div></div></li><li>The keyType can be any build-in value type, string, bytes, or any contract.</li><li>The valueType can by any type including another mapping, or an array.</li><li>Mappings are not iterable. You cannot loop in all elements of the mapping, you only can access value if you have a key. ```solidity // SPDX-License-Identifier: MIT pragma solidity ^0.8.10;</li></ul><p>contract Mapping { // Mapping from address to uint mapping(address =&gt; uint) public myMap;</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function get(address _addr) public view returns (uint) {
    // Mapping always returns a value.
    // If the value was never set, it will return the default value.
    return myMap[_addr];
}

function set(address _addr, uint _i) public {
    // Update the value at this address
    myMap[_addr] = _i;
}

function remove(address _addr) public {
    // Reset the value to the default value.
    delete myMap[_addr];
} }
</code></pre></div></div><p>contract NestedMapping { // Nested mapping (mapping from address to another mapping) mapping(address =&gt; mapping(uint =&gt; bool)) public nested;</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function get(address _addr1, uint _i) public view returns (bool) {
    // You can get values from a nested mapping
    // even when it is not initialized
    return nested[_addr1][_i];
}

function set(
    address _addr1,
    uint _i,
    bool _boo
) public {
    nested[_addr1][_i] = _boo;
}

function remove(address _addr1, uint _i) public {
    delete nested[_addr1][_i];
} }
</code></pre></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
### 2. Array
- Array can have a compiler-time fixed size or a dynamic size.
- The value types **bytes1**, **bytes2**, ..., **bytes32** hold a sequence of bytes from 1 to up to 32. 
- **string** is dynamically-size UTF-8 encoded string and **bytes** is dynamically-size bytes array. **It is not a value-type**.
```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.10;

contract Array {
    // Several ways to initialize an array
    uint[] public arr;
    uint[] public arr2 = [1, 2, 3];
    // Fixed sized array, all elements initialize to 0
    uint[10] public myFixedSizeArr;

    function get(uint i) public view returns (uint) {
        return arr[i];
    }

    // Solidity can return the entire array.
    // But this function should be avoided for
    // arrays that can grow indefinitely in length.
    function getArr() public view returns (uint[] memory) {
        return arr;
    }

    function push(uint i) public {
        // Append to array
        // This will increase the array length by 1.
        arr.push(i);
    }

    function pop() public {
        // Remove last element from array
        // This will decrease the array length by 1
        arr.pop();
    }

    function getLength() public view returns (uint) {
        return arr.length;
    }

    function remove(uint index) public {
        // Delete does not change the array length.
        // It resets the value at index to it's default value,
        // in this case 0
        delete arr[index];
    }

    function examples() external {
        // create array in memory, only fixed size can be created
        uint[] memory a = new uint[](5);
    }
}
</code></pre></div></div><h4 id="examples-of-removing-array-element">Examples of removing array element</h4><h5 id="remove-array-element-by-shifting-elements-from-right-to-left">Remove array element by shifting elements from right to left:</h5><div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// SPDX-License-Identifier: MIT
</span><span class="k">pragma</span> <span class="n">solidity</span> <span class="o">^</span><span class="mf">0.8</span><span class="p">.</span><span class="mi">10</span><span class="p">;</span>

<span class="k">contract</span> <span class="n">ArrayRemoveByShifting</span> <span class="p">{</span>
    <span class="c1">// [1, 2, 3] -- remove(1) --&gt; [1, 3, 3] --&gt; [1, 3]
</span>    <span class="c1">// [1, 2, 3, 4, 5, 6] -- remove(2) --&gt; [1, 2, 4, 5, 6, 6] --&gt; [1, 2, 4, 5, 6]
</span>    <span class="c1">// [1, 2, 3, 4, 5, 6] -- remove(0) --&gt; [2, 3, 4, 5, 6, 6] --&gt; [2, 3, 4, 5, 6]
</span>    <span class="c1">// [1] -- remove(0) --&gt; [1] --&gt; []
</span>
    <span class="kt">uint</span><span class="p">[]</span> <span class="k">public</span> <span class="n">arr</span><span class="p">;</span>

    <span class="k">function</span> <span class="n">remove</span><span class="p">(</span><span class="kt">uint</span> <span class="n">_index</span><span class="p">)</span> <span class="k">public</span> <span class="p">{</span>
        <span class="nb">require</span><span class="p">(</span><span class="n">_index</span> <span class="o">&lt;</span> <span class="n">arr</span><span class="p">.</span><span class="n">length</span><span class="p">,</span> <span class="s">"index out of bound"</span><span class="p">);</span>

        <span class="k">for</span> <span class="p">(</span><span class="kt">uint</span> <span class="n">i</span> <span class="o">=</span> <span class="n">_index</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">arr</span><span class="p">.</span><span class="n">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="n">arr</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">function</span> <span class="n">test</span><span class="p">()</span> <span class="k">external</span> <span class="p">{</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">];</span>
        <span class="n">remove</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
        <span class="c1">// [1, 2, 4, 5]
</span>        <span class="nb">assert</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">);</span>
        <span class="nb">assert</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">);</span>
        <span class="nb">assert</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="mi">4</span><span class="p">);</span>
        <span class="nb">assert</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="mi">5</span><span class="p">);</span>
        <span class="nb">assert</span><span class="p">(</span><span class="n">arr</span><span class="p">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">4</span><span class="p">);</span>

        <span class="n">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
        <span class="c1">// []
</span>        <span class="nb">assert</span><span class="p">(</span><span class="n">arr</span><span class="p">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div><h5 id="remove-array-element-by-copying-last-element-into-to-the-place-to-remove">Remove array element by copying last element into to the place to remove:</h5><div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// SPDX-License-Identifier: MIT
</span><span class="k">pragma</span> <span class="n">solidity</span> <span class="o">^</span><span class="mf">0.8</span><span class="p">.</span><span class="mi">10</span><span class="p">;</span>

<span class="k">contract</span> <span class="n">ArrayReplaceFromEnd</span> <span class="p">{</span>
    <span class="kt">uint</span><span class="p">[]</span> <span class="k">public</span> <span class="n">arr</span><span class="p">;</span>

    <span class="c1">// Deleting an element creates a gap in the array.
</span>    <span class="c1">// One trick to keep the array compact is to
</span>    <span class="c1">// move the last element into the place to delete.
</span>    <span class="k">function</span> <span class="n">remove</span><span class="p">(</span><span class="kt">uint</span> <span class="n">index</span><span class="p">)</span> <span class="k">public</span> <span class="p">{</span>
        <span class="c1">// Move the last element into the place to delete
</span>        <span class="n">arr</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="n">arr</span><span class="p">.</span><span class="n">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
        <span class="c1">// Remove the last element
</span>        <span class="n">arr</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">function</span> <span class="n">test</span><span class="p">()</span> <span class="k">public</span> <span class="p">{</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">];</span>

        <span class="n">remove</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
        <span class="c1">// [1, 4, 3]
</span>        <span class="nb">assert</span><span class="p">(</span><span class="n">arr</span><span class="p">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">3</span><span class="p">);</span>
        <span class="nb">assert</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">);</span>
        <span class="nb">assert</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">4</span><span class="p">);</span>
        <span class="nb">assert</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="mi">3</span><span class="p">);</span>

        <span class="n">remove</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
        <span class="c1">// [1, 4]
</span>        <span class="nb">assert</span><span class="p">(</span><span class="n">arr</span><span class="p">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">2</span><span class="p">);</span>
        <span class="nb">assert</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">);</span>
        <span class="nb">assert</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">4</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div><h3 id="3-enum">3. Enum</h3><ul><li>Enum in Solidity is completely same as other programming language.</li><li>It is useful to model choice and keep track of state.</li></ul><div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// SPDX-License-Identifier: MIT
</span><span class="k">pragma</span> <span class="n">solidity</span> <span class="o">^</span><span class="mf">0.8</span><span class="p">.</span><span class="mi">10</span><span class="p">;</span>

<span class="k">contract</span> <span class="n">Enum</span> <span class="p">{</span>
    <span class="c1">// Enum representing shipping status
</span>    <span class="k">enum</span> <span class="n">Status</span> <span class="p">{</span>
        <span class="n">Pending</span><span class="p">,</span>
        <span class="n">Shipped</span><span class="p">,</span>
        <span class="n">Accepted</span><span class="p">,</span>
        <span class="n">Rejected</span><span class="p">,</span>
        <span class="n">Canceled</span>
    <span class="p">}</span>

    <span class="c1">// Default value is the first element listed in
</span>    <span class="c1">// definition of the type, in this case "Pending"
</span>    <span class="n">Status</span> <span class="k">public</span> <span class="n">status</span><span class="p">;</span>

    <span class="c1">// Returns uint
</span>    <span class="c1">// Pending  - 0
</span>    <span class="c1">// Shipped  - 1
</span>    <span class="c1">// Accepted - 2
</span>    <span class="c1">// Rejected - 3
</span>    <span class="c1">// Canceled - 4
</span>    <span class="k">function</span> <span class="n">get</span><span class="p">()</span> <span class="k">public</span> <span class="k">view</span> <span class="k">returns</span> <span class="p">(</span><span class="n">Status</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">status</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Update status by passing uint into input
</span>    <span class="k">function</span> <span class="n">set</span><span class="p">(</span><span class="n">Status</span> <span class="n">_status</span><span class="p">)</span> <span class="k">public</span> <span class="p">{</span>
        <span class="n">status</span> <span class="o">=</span> <span class="n">_status</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// You can update to a specific enum like this
</span>    <span class="k">function</span> <span class="n">cancel</span><span class="p">()</span> <span class="k">public</span> <span class="p">{</span>
        <span class="n">status</span> <span class="o">=</span> <span class="n">Status</span><span class="p">.</span><span class="n">Canceled</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// delete resets the enum to its first value, 0
</span>    <span class="k">function</span> <span class="n">reset</span><span class="p">()</span> <span class="k">public</span> <span class="p">{</span>
        <span class="k">delete</span> <span class="n">status</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div><h3 id="4-struct">4. Struct</h3><ul><li>Build-in value type is never enough for developers. We always needs to define new type for modeling objects in real world.</li><li>In Solidity, you can define your own type by creating a struct. If you are familiar with Golang or C, I think it is the same as the struct of those languages.</li><li>Struct can be declared outside of a contract and imported from another contract. ```solidity // SPDX-License-Identifier: MIT pragma solidity ^0.8.10;</li></ul><p>contract Todos { struct Todo { string text; bool completed; }</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// An array of 'Todo' structs
Todo[] public todos;

function create(string memory _text) public {
    // 3 ways to initialize a struct
    // - calling it like a function
    todos.push(Todo(_text, false));

    // key value mapping
    todos.push(Todo({text: _text, completed: false}));

    // initialize an empty struct and then update it
    Todo memory todo;
    todo.text = _text;
    // todo.completed initialized to false

    todos.push(todo);
}

// Solidity automatically created a getter for 'todos' so
// you don't actually need this function.
function get(uint _index) public view returns (string memory text, bool completed) {
    Todo storage todo = todos[_index];
    return (todo.text, todo.completed);
}

// update text
function update(uint _index, string memory _text) public {
    Todo storage todo = todos[_index];
    todo.text = _text;
}

// update completed
function toggleCompleted(uint _index) public {
    Todo storage todo = todos[_index];
    todo.completed = !todo.completed;
} } ```
</code></pre></div></div><h3 id="5-ether-wei-gas">5. Ether, Wei, Gas</h3><ul><li>Ether: it is the currency in the ethereum network. Transaction are paid with <strong>Ether</strong></li><li>Wei: it is the smallest unit (1 <strong>Ether</strong> = 10<strong>18 **Wei</strong>)</li><li>In a transaction you pay <strong>gas spent</strong> * <strong>gas price</strong> amount of <strong>Ether</strong><ul><li>gas: is a unit of computation, it is the same as oil in real world</li><li>gas spent: is the total amount of gas used in a transaction, it is the same as the total of oil used for your car when you drive from your home to your office.</li><li>gas price: is how much <strong>Ether</strong> you are willing to pay per <strong>gas</strong>, it is the same as the price of a liter of oil.</li></ul></li></ul><h3 id="6-data-locations">6. Data locations</h3><ul><li>Variables are declared as either storage, memory or calldata to explicitly specify the location of the data:<ul><li>storage: variable is a state variable (store on blockchain)</li><li>memory: variable is in memory and it exists while a function is being called</li><li>calldata: special data location that contains function arguments ```solidity // SPDX-License-Identifier: MIT pragma solidity ^0.8.10;</li></ul></li></ul><p>contract DataLocations { uint[] public arr; mapping(uint =&gt; address) map; struct MyStruct { uint foo; } mapping(uint =&gt; MyStruct) myStructs;</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function f() public {
    // call _f with state variables
    _f(arr, map, myStructs[1]);

    // get a struct from a mapping
    MyStruct storage myStruct = myStructs[1];
    // create a struct in memory
    MyStruct memory myMemStruct = MyStruct(0);
}

function _f(
    uint[] storage _arr,
    mapping(uint =&gt; address) storage _map,
    MyStruct storage _myStruct
) internal {
    // do something with storage variables
}

// You can return memory variables
function g(uint[] memory _arr) public returns (uint[] memory) {
    // do something with memory array
}

function h(uint[] calldata _arr) external {
    // do something with calldata array
} } ```
</code></pre></div></div><h3 id="7-function">7. Function</h3><div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// SPDX-License-Identifier: MIT
</span><span class="k">pragma</span> <span class="n">solidity</span> <span class="o">^</span><span class="mf">0.8</span><span class="p">.</span><span class="mi">10</span><span class="p">;</span>

<span class="k">contract</span> <span class="n">Function</span> <span class="p">{</span>
    <span class="c1">// Functions can return multiple values.
</span>    <span class="k">function</span> <span class="n">returnMany</span><span class="p">()</span>
        <span class="k">public</span>
        <span class="k">pure</span>
        <span class="k">returns</span> <span class="p">(</span>
            <span class="kt">uint</span><span class="p">,</span>
            <span class="kt">bool</span><span class="p">,</span>
            <span class="kt">uint</span>
        <span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">true</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// Return values can be named.
</span>    <span class="k">function</span> <span class="n">named</span><span class="p">()</span>
        <span class="k">public</span>
        <span class="k">pure</span>
        <span class="k">returns</span> <span class="p">(</span>
            <span class="kt">uint</span> <span class="n">x</span><span class="p">,</span>
            <span class="kt">bool</span> <span class="n">b</span><span class="p">,</span>
            <span class="kt">uint</span> <span class="n">y</span>
        <span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">true</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// Return values can be assigned to their name.
</span>    <span class="c1">// In this case the return statement can be omitted.
</span>    <span class="k">function</span> <span class="n">assigned</span><span class="p">()</span>
        <span class="k">public</span>
        <span class="k">pure</span>
        <span class="k">returns</span> <span class="p">(</span>
            <span class="kt">uint</span> <span class="n">x</span><span class="p">,</span>
            <span class="kt">bool</span> <span class="n">b</span><span class="p">,</span>
            <span class="kt">uint</span> <span class="n">y</span>
        <span class="p">)</span>
    <span class="p">{</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="n">b</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
        <span class="n">y</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Use destructuring assignment when calling another
</span>    <span class="c1">// function that returns multiple values.
</span>    <span class="k">function</span> <span class="n">destructuringAssignments</span><span class="p">()</span>
        <span class="k">public</span>
        <span class="k">pure</span>
        <span class="k">returns</span> <span class="p">(</span>
            <span class="kt">uint</span><span class="p">,</span>
            <span class="kt">bool</span><span class="p">,</span>
            <span class="kt">uint</span><span class="p">,</span>
            <span class="kt">uint</span><span class="p">,</span>
            <span class="kt">uint</span>
        <span class="p">)</span>
    <span class="p">{</span>
        <span class="p">(</span><span class="kt">uint</span> <span class="n">i</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">b</span><span class="p">,</span> <span class="kt">uint</span> <span class="n">j</span><span class="p">)</span> <span class="o">=</span> <span class="n">returnMany</span><span class="p">();</span>

        <span class="c1">// Values can be left out.
</span>        <span class="p">(</span><span class="kt">uint</span> <span class="n">x</span><span class="p">,</span> <span class="p">,</span> <span class="kt">uint</span> <span class="n">y</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">);</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// Cannot use map for either input or output
</span>
    <span class="c1">// Can use array for input
</span>    <span class="k">function</span> <span class="n">arrayInput</span><span class="p">(</span><span class="kt">uint</span><span class="p">[]</span> <span class="k">memory</span> <span class="n">_arr</span><span class="p">)</span> <span class="k">public</span> <span class="p">{}</span>

    <span class="c1">// Can use array for output
</span>    <span class="kt">uint</span><span class="p">[]</span> <span class="k">public</span> <span class="n">arr</span><span class="p">;</span>

    <span class="k">function</span> <span class="n">arrayOutput</span><span class="p">()</span> <span class="k">public</span> <span class="k">view</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">uint</span><span class="p">[]</span> <span class="k">memory</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">arr</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div><h3 id="8-view-pure-function">8. View, Pure function</h3><ul><li><strong>View function</strong> declares that no state will be changed.</li><li><strong>Pure function</strong> declares that no state variable will be changed or read. ```solidity // SPDX-License-Identifier: MIT pragma solidity ^0.8.10;</li></ul><p>contract ViewAndPure { uint public x = 1;</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// Promise not to modify the state.
function addToX(uint y) public view returns (uint) {
    return x + y;
}

// Promise not to modify or read from the state.
function add(uint i, uint j) public pure returns (uint) {
    return i + j;
} } ```
</code></pre></div></div><div style="margin-top:2em;padding:0 1.5em;border:1px solid #d3d3d3;background-color:#deebf7"><h3>Document Information</h3><ul><li>Author of this article:<a href="https://tuhalang.github.io" target="_blank">Tuhalang</a></li><li>Link to this article:<a href="https://tuhalang.github.io/2022/03/27/Solidity-Foundation-Part-2/" target="_blank">https://tuhalang.github.io/2022/03/27/Solidity-Foundation-Part-2/</a></li><li>Copyright statement: free reprint - non-commercial - non-derivative - keep attribution（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank">Creative Commons 3.0 License</a>）</li></ul></div></article><div class="share"><div class="share-component" data-disabled='qq,weibo,wechat,douban,qzone'></div></div><div class="comment"><div id="gitalk-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/vendor/gitalk/gitalk.css"> <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script> <script> var gitalk = new Gitalk({ id: '/2022/03/27/Solidity-Foundation-Part-2/', clientID: 'ee780ad580c724383fc9', clientSecret: 'b27916ae861218d97f817647e98288467e8f1ed0', repo: 'blog-comments', owner: 'tuhalang', admin: ['tuhalang'], labels: ['gitment'], perPage: 50, }); gitalk.render('gitalk-container'); </script></div></div><div class="column one-fourth"><h3>Search</h3><div id="site_search"> <input style="width:96%" type="text" id="search_box" placeholder="Search"></div><ul id="search_results" style="font-size:14px;list-style-type:none;padding-top:10px;padding-left:10px;"></ul><script src="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/js/simple-jekyll-search.min.js"></script> <script type="text/javascript"> SimpleJekyllSearch({ searchInput: document.getElementById('search_box'), resultsContainer: document.getElementById('search_results'), json: 'https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@built/assets/search_data.json?v=1648391308', searchResultTemplate: '<li><a href="{url}" title="{title}">{title}</a></li>', noResultsText: 'No results found', limit: 10, fuzzy: false, exclude: ['Welcome'] }) </script><h3 class="post-directory-title mobile-hidden">Table of Contents</h3><div id="post-directory-module" class="mobile-hidden"><section class="post-directory"><dl></dl></section></div><script src="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/js/jquery.toc.js"></script> <ins class="adsbygoogle" style="display:inline-block;width:300px;height:250px" data-ad-client="ca-pub-7093222719567591" data-ad-slot="2908164598"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script></div></div></section><footer class="container"> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-7093222719567591" data-ad-slot="5263168187" data-ad-format="auto" data-full-width-responsive="true"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script><div class="site-footer" role="contentinfo"><div class="copyright left mobile-block"> © 2022 <span title="Tuhalang">Tuhalang</span> <a href="javascript:window.scrollTo(0,0)" class="right mobile-visible">TOP</a></div><ul class="site-footer-links right mobile-hidden"><li> <a href="javascript:window.scrollTo(0,0)" >TOP</a></li></ul><a href="https://github.com/tuhalang/tuhalang.github.io" target="_blank" aria-label="view source code"> <span class="mega-octicon octicon-mark-github" title="GitHub"></span> </a><ul class="site-footer-links mobile-hidden"><li> <a href="https://tuhalang.github.io/" title="Home" target="">Home</a></li><li> <a href="https://tuhalang.github.io/categories/" title="Categories" target="">Categories</a></li><li> <a href="https://tuhalang.github.io/archives/" title="Archives" target="">Archives</a></li><li> <a href="https://tuhalang.github.io/wiki/" title="Wiki" target="">Wiki</a></li><li> <a href="https://tuhalang.github.io/about/" title="About" target="">About</a></li><li><a href="https://tuhalang.github.io/feed.xml"><span class="octicon octicon-rss" style="color:orange;"></span></a></li></ul></div></footer><div class="tools-wrapper"> <a class="gotop" href="#" title="回到顶部"><span class="octicon octicon-arrow-up"></span></a></div><script src="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/vendor/share.js/dist/js/share.min.js"></script> <script src="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/js/geopattern.js"></script> <script> jQuery(document).ready(function($) { $('.geopattern').each(function(){ $(this).geopattern($(this).data('pattern-id')); }); /* hljs.initHighlightingOnLoad(); */ }); </script></body></html>
